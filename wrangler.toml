# ============================================================
# DEPLOYMENT CHECKLIST — run these steps before `wrangler deploy`
#
# Step 1: Create the KV namespace
#   wrangler kv namespace create KKME_SIGNALS
#   (note the returned `id`)
#
#   wrangler kv namespace create KKME_SIGNALS --preview
#   (note the returned `id` for preview_id below)
#
# Step 2: Paste both IDs into [[kv_namespaces]] below,
#   replacing REPLACE_WITH_KV_NAMESPACE_ID
#   and REPLACE_WITH_KV_PREVIEW_ID
#
# Step 3: Set API key secrets (never put keys in this file)
#   wrangler secret put ENTSOE_API_KEY
#   wrangler secret put UPDATE_SECRET      ← used by GitHub Action POST /s2/update
#   (also add UPDATE_SECRET to GitHub repo secrets — must match)
#
# Step 4: Deploy
#   wrangler deploy
# ============================================================

name = "kkme-fetch-s1"
main = "workers/fetch-s1.js"
compatibility_date = "2025-01-01"
workers_dev = true
preview_urls = false

[triggers]
crons = [
  "0 */4 * * *",    # Every 4h: S1 + S3 + S4 + Euribor + S5 + S6 + S7 + S8 + S9
  "30 9 * * *",     # 09:30 UTC daily: S2 watchdog
  "0 8 * * *",      # 08:00 UTC daily: daily digest to Telegram
]

[[kv_namespaces]]
binding = "KKME_SIGNALS"
id = "323b493a50764b24b88a8b4a5687a24b"
preview_id = "5f2356e7c25b44538e4bcfbe2a5de0ca"
